<html>
    <head>
        <title>Test API Frontend</title>
    </head>
    <body>
        <h1>
            Test API Frontend Website
        </h1>
        

        <div>
            <button onclick="GetAllCourses();">Get All Course</button>
        </div>

        <div>
            <button onclick="">Get Single Course</button>
        </div>

        <div>
            <button onclick="">Update Course</button>
        </div>

        <div>
            <button onclick="">Delete Course</button>
        </div>

        <div>
            <button onclick="">Create Course</button>
        </div>







        <div>
            <div id="show_result"></div>
        </div>

        <script>

            function GetAllCourses(){
                // Get all courses
                var url  = "http://localhost:3000/api/courses";
                var xhr  = new XMLHttpRequest()
                xhr.open('GET', url, true)
                xhr.onload = function () {
                    var courses = JSON.parse(xhr.responseText);
                    if (xhr.readyState == 4 && xhr.status == "200") {
                        console.table(courses);
                        console.log('success');
                        
                        
                        for( i=0;i<courses.length;i++ ){
                            document.getElementById('show_result').innerHTML += "<div>ID: " + courses[i].id + "NAME: " + courses[i].name + "</div>";
                        }
                        

                    } else {
                        console.error(courses);
                        console.log('Error');
                    }
                }
                xhr.send(null);	
            }


            function GetUserDetail(){
                // Get a user
                var url  = "http://localhost:8080/api/v1/users";
                var xhr  = new XMLHttpRequest()
                xhr.open('GET', url+'/1', true)
                xhr.onload = function () {
                    var users = JSON.parse(xhr.responseText);
                    if (xhr.readyState == 4 && xhr.status == "200") {
                        console.table(users);
                    } else {
                        console.error(users);
                    }
                }
                xhr.send(null);	
            }


            function PostUser(){
                // Post a user
                var url = "http://localhost:8080/api/v1/users";

                var data = {};
                data.firstname = "John";
                data.lastname  = "Snow";
                var json = JSON.stringify(data);

                var xhr = new XMLHttpRequest();
                xhr.open("POST", url, true);
                xhr.setRequestHeader('Content-type','application/json; charset=utf-8');
                xhr.onload = function () {
                    var users = JSON.parse(xhr.responseText);
                    if (xhr.readyState == 4 && xhr.status == "201") {
                        console.table(users);
                    } else {
                        console.error(users);
                    }
                }
                xhr.send(json);	
            }


            function UpdateUser(){
                // Update a user
                var url = "http://localhost:8080/api/v1/users";

                var data = {};
                data.firstname = "John2";
                data.lastname  = "Snow2";
                var json = JSON.stringify(data);

                var xhr = new XMLHttpRequest();
                xhr.open("PUT", url+'/12', true);
                xhr.setRequestHeader('Content-type','application/json; charset=utf-8');
                xhr.onload = function () {
                    var users = JSON.parse(xhr.responseText);
                    if (xhr.readyState == 4 && xhr.status == "200") {
                        console.table(users);
                    } else {
                        console.error(users);
                    }
                }
                xhr.send(json);
            }


            function DeleteUser(){
            // Delete a user
            var url = "http://localhost:8080/api/v1/users";
            var xhr = new XMLHttpRequest();
            xhr.open("DELETE", url+'/12', true);
            xhr.onload = function () {
                var users = JSON.parse(xhr.responseText);
                if (xhr.readyState == 4 && xhr.status == "200") {
                    console.table(users);
                } else {
                    console.error(users);
                }
            }
            xhr.send(null);
        }

        </script>
            

        </body>
    </html>